<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' }}">
    <script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script src="//cdn.bootcss.com/toc/0.3.2/toc.min.js"></script>
    <title>{{ page.title }}</title>
    <script>
        // 百度统计
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?35738c606f02e5a1988032065dab29aa";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>

<body>

    <div id="toc" style="display:none;">
    </div>

    <header>
        <div class="container">
            <h1>{{ page.title }}</h1>
            <h2>{{ page.description }}</h2>
            <div>
                <a href="/">文章列表</a>
                <a id="ctrlTocLink" href="javascript:void(0);" style="float:right;">显示目录</a>
            </div>
        </div>
    </header>

    <div class="container">
        <section id="main_content">
            {{ content }}
        </section>
    </div>

    <script>
        $(function($) {
            $('#toc').toc({
                'container': '#main_content'
            });

            $('.toc-h2').hide();

            $('#ctrlTocLink').click(function() {
                $('#toc').toggle();
                var text = $(this).text();
                if (text == '显示目录') {
                    $(this).text('隐藏目录');
                } else if (text == '隐藏目录') {
                    $(this).text('显示目录');
                }
            });

            $('.toc-h1').click(function() {
                $('.toc-h2').hide();
                var next = $(this).next();
                while (next.prop('tagName') === 'LI' && next.hasClass('toc-h2')) {
                    next.show();
                    next = next.next();
                }
            });
        })
    </script>

</body>

</html>